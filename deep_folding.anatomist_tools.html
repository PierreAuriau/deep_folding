<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>deep_folding.anatomist_tools package &mdash; deep_folding 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="deep_folding.anatomist_tools.utils package" href="deep_folding.anatomist_tools.utils.html" />
    <link rel="prev" title="deep_folding package" href="deep_folding.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> deep_folding
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">README:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">Deep folding</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#development">Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="deep_folding.html">deep_folding package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="deep_folding.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">deep_folding.anatomist_tools package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-deep_folding.anatomist_tools.benchmark_generation">deep_folding.anatomist_tools.benchmark_generation module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deep-folding-anatomist-tools-benchmark-pipeline-module">deep_folding.anatomist_tools.benchmark_pipeline module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-deep_folding.anatomist_tools.bounding_box">deep_folding.anatomist_tools.bounding_box module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-deep_folding.anatomist_tools.dataset_gen_pipe">deep_folding.anatomist_tools.dataset_gen_pipe module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-deep_folding.anatomist_tools.display">deep_folding.anatomist_tools.display module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-deep_folding.anatomist_tools.load_data">deep_folding.anatomist_tools.load_data module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-deep_folding.anatomist_tools.transform">deep_folding.anatomist_tools.transform module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-deep_folding.anatomist_tools">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="deep_folding.preprocessing.html">deep_folding.preprocessing package</a></li>
<li class="toctree-l3"><a class="reference internal" href="deep_folding.utils.html">deep_folding.utils package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deep_folding.html#module-deep_folding">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">deep_folding</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="deep_folding.html">deep_folding package</a> &raquo;</li>
      <li>deep_folding.anatomist_tools package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/deep_folding.anatomist_tools.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="deep-folding-anatomist-tools-package">
<h1>deep_folding.anatomist_tools package<a class="headerlink" href="#deep-folding-anatomist-tools-package" title="Permalink to this headline"></a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="deep_folding.anatomist_tools.utils.html">deep_folding.anatomist_tools.utils package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deep_folding.anatomist_tools.utils.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="deep_folding.anatomist_tools.utils.html#module-deep_folding.anatomist_tools.utils.load_bbox">deep_folding.anatomist_tools.utils.load_bbox module</a></li>
<li class="toctree-l2"><a class="reference internal" href="deep_folding.anatomist_tools.utils.html#module-deep_folding.anatomist_tools.utils.logs">deep_folding.anatomist_tools.utils.logs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="deep_folding.anatomist_tools.utils.html#module-deep_folding.anatomist_tools.utils.resample">deep_folding.anatomist_tools.utils.resample module</a></li>
<li class="toctree-l2"><a class="reference internal" href="deep_folding.anatomist_tools.utils.html#module-deep_folding.anatomist_tools.utils.sulcus_side">deep_folding.anatomist_tools.utils.sulcus_side module</a></li>
<li class="toctree-l2"><a class="reference internal" href="deep_folding.anatomist_tools.utils.html#module-deep_folding.anatomist_tools.utils">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</div>
<div class="section" id="module-deep_folding.anatomist_tools.benchmark_generation">
<span id="deep-folding-anatomist-tools-benchmark-generation-module"></span><h2>deep_folding.anatomist_tools.benchmark_generation module<a class="headerlink" href="#module-deep_folding.anatomist_tools.benchmark_generation" title="Permalink to this headline"></a></h2>
<p>Creating abnormal skeleton images</p>
<p>The aim of this script is to generate a benchmark of sulcal abnormalities.
Abnormalities are defined as skeletons with one simple surface missing.
This simple surface must be completely inside the bounding box of interest and
include a minimum number of voxels (in order that the anomaly is big enough to
be considered as abnormal).</p>
<dl class="py class">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.Benchmark">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.benchmark_generation.</span></span><span class="sig-name descname"><span class="pre">Benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ss_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sulci_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">saving_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/hcp/ANALYSIS/3T_morphologist/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/data/bbox/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.Benchmark" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generates benchmark of altered skeletons</p>
<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.Benchmark.add_ss">
<span class="sig-name descname"><span class="pre">add_ss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subjects_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.Benchmark.add_ss" title="Permalink to this definition"></a></dt>
<dd><p>Adds one simple surface from subject i to subject i+1 skeleton</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subjects_list</strong> – list of subjects</p></li>
<li><p><strong>i</strong> – int giving the current subject</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.Benchmark.delete_ss">
<span class="sig-name descname"><span class="pre">delete_ss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.Benchmark.delete_ss" title="Permalink to this definition"></a></dt>
<dd><p>Deletes one simple surface</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sub</strong> – int giving the subject</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.Benchmark.get_simple_surfaces">
<span class="sig-name descname"><span class="pre">get_simple_surfaces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.Benchmark.get_simple_surfaces" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Selects simple surfaces of one subject that satisfy following</dt><dd><p>conditions: size &gt;= given ss_size and completely included in the
bouding box</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sub</strong> – int giving the subject</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.Benchmark.random_skel">
<span class="sig-name descname"><span class="pre">random_skel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.Benchmark.random_skel" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.Benchmark.save_file">
<span class="sig-name descname"><span class="pre">save_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sub</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.Benchmark.save_file" title="Permalink to this definition"></a></dt>
<dd><p>Saves the modified skeleton</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sub</strong> – int giving the subject</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.Benchmark.save_lists">
<span class="sig-name descname"><span class="pre">save_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abnormality_test</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">givers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subjects_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.Benchmark.save_lists" title="Permalink to this definition"></a></dt>
<dd><p>Saves lists of modified subjects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abnormality_test</strong> – list of modified subjects</p></li>
<li><p><strong>givers</strong> – in case of simple surface addition, list of subjects whose
one of the simple surface has been added to another subject</p></li>
<li><p><strong>subjects_list</strong> – list of subjects</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.generate">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.benchmark_generation.</span></span><span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ss_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sulci_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'suppress'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bench_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">150</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subjects_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">saving_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/lguillon/mic21/anomalies_set/dataset/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/data/bbox/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.generate" title="Permalink to this definition"></a></dt>
<dd><p>Generates a benchmark</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>b_num</strong> – number of the benchmark to create</p></li>
<li><p><strong>side</strong> – hemisphere side (either L for left, or R for right hemisphere)</p></li>
<li><p><strong>sulci_list</strong> – list of sulcus names</p></li>
<li><p><strong>mode</strong> – string giving the type of benchmark to create (‘suppress’, ‘add’
or ‘mix’)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.benchmark_generation.get_sub_list">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.benchmark_generation.</span></span><span class="sig-name descname"><span class="pre">get_sub_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subjects_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.benchmark_generation.get_sub_list" title="Permalink to this definition"></a></dt>
<dd><p>Returns subjects list for which latered skelerons can be created
Only right handed HCP subjects</p>
</dd></dl>

</div>
<div class="section" id="deep-folding-anatomist-tools-benchmark-pipeline-module">
<h2>deep_folding.anatomist_tools.benchmark_pipeline module<a class="headerlink" href="#deep-folding-anatomist-tools-benchmark-pipeline-module" title="Permalink to this headline"></a></h2>
</div>
<div class="section" id="module-deep_folding.anatomist_tools.bounding_box">
<span id="deep-folding-anatomist-tools-bounding-box-module"></span><h2>deep_folding.anatomist_tools.bounding_box module<a class="headerlink" href="#module-deep_folding.anatomist_tools.bounding_box" title="Permalink to this headline"></a></h2>
<p>The aim of this script is to output bounding box got given sulci
based on a manually labelled dataset</p>
<p>Bounding box corresponds to the biggest box that encompasses the given sulci
on all subjects of the manually labelled dataset. It measures the bounding box
in the normalized SPM space</p>
<dl class="py class">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.BoundingBoxMax">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.bounding_box.</span></span><span class="sig-name descname"><span class="pre">BoundingBoxMax</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/lnao/PClean/database_learnclean/all/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_to_graph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'t1mri/t1/default_analysis/folds/3.3/base2018_manual'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgt_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/test/bbox'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sulcus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'S.T.s.ter.asc.ant.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'L'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_normalized_spm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/hcp/ANALYSIS/3T_morphologist/100206/t1mri/default_acquisition/normalized_SPM_100206.nii'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_voxel_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.BoundingBoxMax" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Determines the maximum Bounding Box around given sulci</p>
<p>It is determined in the normalized SPM referential</p>
<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.compute_bounding_box">
<span class="sig-name descname"><span class="pre">compute_bounding_box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.compute_bounding_box" title="Permalink to this definition"></a></dt>
<dd><p>Main class program to compute the bounding box</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number_subjects</strong> – number_subjects to analyze</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.compute_box_voxel">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">compute_box_voxel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bbmin_tal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbmax_tal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tal_to_normalized_spm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voxel_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.compute_box_voxel" title="Permalink to this definition"></a></dt>
<dd><p>Returns the coordinates of the box as voxels</p>
<p>Coordinates of the box in voxels are determined in the MNI referential</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bbmin_tal</strong> – numpy array with the coordinates of the upper right corner
of the box (AIMS Talairach space)</p></li>
<li><p><strong>bbmax_tal</strong> – numpy array with the coordinates of the lower left corner
of the box (AIMS Talairach space)</p></li>
<li><p><strong>tal_to_normalized_spm</strong> – transformation used from Talairach space
to normalized SPM</p></li>
<li><p><strong>voxel_size</strong> – voxel size (in MNI referential or HCP normalized SPM space)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>numpy array with the coordinates of the upper right corner</dt><dd><p>of the box (voxels in MNI space)</p>
</dd>
<dt>bblax_vox: numpy array with the coordinates of the lower left corner</dt><dd><p>of the box (voxels in MNI space)</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bbmin_vox</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.compute_max_box">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">compute_max_box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_bbmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_bbmax</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.compute_max_box" title="Permalink to this definition"></a></dt>
<dd><p>Returns the coordinates of the box encompassing all input boxes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_bbmin</strong> – list containing the upper right vertex of the box</p></li>
<li><p><strong>list_bbmax</strong> – list containing the lower left vertex of the box</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>numpy array with the x,y,z coordinates</dt><dd><p>of the upper right corner of the box</p>
</dd>
<dt>bblax: numpy array with the x,y,z coordinates</dt><dd><p>of the lower left corner of the box</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bbmin</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.get_bounding_boxes">
<span class="sig-name descname"><span class="pre">get_bounding_boxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subjects</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.get_bounding_boxes" title="Permalink to this definition"></a></dt>
<dd><p>get bounding boxes of the chosen sulcus for all subjects</p>
<p>Function that outputs the bounding box for the listed sulci on a manually
labeled dataset.
Bounding box corresponds to the biggest box encountered in the manually
labeled subjects in the AIMS Talairach space, different from the MNI
Talairach template.
The bounding box is the smallest rectangular box that
encompasses the sulcus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subjects</strong> – list containing all subjects to be analyzed</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>list containing the upper right vertex of the box</dt><dd><p>in the Talairach space</p>
</dd>
<dt>list_bbmax: list containing the lower left vertex of the box</dt><dd><p>in the Talairach space</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list_bbmin</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.get_one_bounding_box">
<span class="sig-name descname"><span class="pre">get_one_bounding_box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph_filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.get_one_bounding_box" title="Permalink to this definition"></a></dt>
<dd><p>get bounding box of the chosen sulcus for one data graph</p>
<p>Function that outputs the bounding box for the listed sulci
for this datagraph. The bounding box is the smallest rectangular box
that encompasses the chosen sulcus.
It is given in the AIMS Talairch referential, different from the MNI
Talairach referential.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph_filename</strong> – string being the name of graph file .arg to analyze:
for example: ‘Lammon_base2018_manual.arg’</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>numpy array giving the upper right vertex coordinates</dt><dd><p>of the box in the Talairach space</p>
</dd>
<dt>bbox_max: numpy array fiving the lower left vertex coordinates</dt><dd><p>of the box in the Talairach space</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bbox_min</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.list_all_subjects">
<span class="sig-name descname"><span class="pre">list_all_subjects</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.list_all_subjects" title="Permalink to this definition"></a></dt>
<dd><p>List all subjects from the clean database (directory src_dir).</p>
<p>Subjects are the names of the subdirectories of the root directory.</p>
<p>Parameters:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list containing all subjects to be analyzed</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>subjects</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.tal_to_normalized_spm">
<span class="sig-name descname"><span class="pre">tal_to_normalized_spm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.BoundingBoxMax.tal_to_normalized_spm" title="Permalink to this definition"></a></dt>
<dd><p>Returns the transformation from AIMS Talairach to normalized SPM</p>
<p>Computes the transformation from AIMS Talairach space to normalized SPM
space, MNI space, passing through SPM template.
Empirically, this was done because some Deep learning results were better
with SPM template.
The transform from MNI to SPM template is taken from HCP database</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>transformation from AIMS Talairach space to</dt><dd><p>normalized SPM</p>
</dd>
</dl>
<p>voxel_size: voxel size (in MNI referential or HCP normalized SPM space)</p>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tal_to_normalized_spm</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.bounding_box">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.bounding_box.</span></span><span class="sig-name descname"><span class="pre">bounding_box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/lnao/PClean/database_learnclean/all/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgt_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/test/bbox'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_to_graph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'t1mri/t1/default_analysis/folds/3.3/base2018_manual'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sulcus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'S.T.s.ter.asc.ant.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'L'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_normalized_spm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/hcp/ANALYSIS/3T_morphologist/100206/t1mri/default_acquisition/normalized_SPM_100206.nii'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_voxel_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.bounding_box" title="Permalink to this definition"></a></dt>
<dd><p>Main program computing the box encompassing the sulcus in all subjects</p>
<p>The programm loops over all subjects
and computes in MNI space the voxel coordinates of the box encompassing
the sulci for all subjects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_dir</strong> – list of strings -&gt; directories of the supervised databases</p></li>
<li><p><strong>tgt_dir</strong> – string giving target directory path</p></li>
<li><p><strong>path_to_graph</strong> – string giving relative path to manually labelled graph</p></li>
<li><p><strong>side</strong> – hemisphere side (either ‘L’ for left, or ‘R’ for right)</p></li>
<li><p><strong>sulcus</strong> – string giving the sulcus to analyze</p></li>
<li><p><strong>number_subjects</strong> – integer giving the number of subjects to analyze,
by default it is set to _ALL_SUBJECTS (-1).</p></li>
<li><p><strong>image_normalized_spm</strong> – string giving file name (with path) of normalized
SPM file out of which is extracted the voxel size</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.main">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.bounding_box.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.main" title="Permalink to this definition"></a></dt>
<dd><p>Reads argument line and determines the max bounding box</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> – a list containing command line arguments</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.bounding_box.parse_args">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.bounding_box.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.bounding_box.parse_args" title="Permalink to this definition"></a></dt>
<dd><p>Function parsing command-line arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> – a list containing command line arguments</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary with all arugments as keys</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>params</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deep_folding.anatomist_tools.dataset_gen_pipe">
<span id="deep-folding-anatomist-tools-dataset-gen-pipe-module"></span><h2>deep_folding.anatomist_tools.dataset_gen_pipe module<a class="headerlink" href="#module-deep_folding.anatomist_tools.dataset_gen_pipe" title="Permalink to this headline"></a></h2>
<p>Creating pickle file from T1 MRI datas</p>
<p>The aim of this script is to create dataset of cropped skeletons from MRIs
saved in a .pickle file.
Several steps are required: normalization, crop and .pickle generation</p>
<blockquote>
<div><p>You can use this program by first entering in the brainvisa environment
(here brainvisa 5.0.0 installed with singurity) and launching the script
from the terminal:
&gt;&gt;&gt; bv bash
&gt;&gt;&gt; python dataset_gen_pipe.py</p>
<p>Alternatively, you can launch the script in the interactive terminal ipython:
&gt;&gt;&gt; %run dataset_gen_pipe.py</p>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.dataset_gen_pipe.DatasetCroppedSkeleton">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.dataset_gen_pipe.</span></span><span class="sig-name descname"><span class="pre">DatasetCroppedSkeleton</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/hcp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgt_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/test'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/data/transform'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/data/bbox'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">morphologist_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ANALYSIS/3T_morphologist'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_sulci</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'S.T.s.ter.asc.ant.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'L'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nearest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_voxel_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.dataset_gen_pipe.DatasetCroppedSkeleton" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generates cropped skeleton files and corresponding pickle file</p>
<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.dataset_gen_pipe.DatasetCroppedSkeleton.crop_files">
<span class="sig-name descname"><span class="pre">crop_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.dataset_gen_pipe.DatasetCroppedSkeleton.crop_files" title="Permalink to this definition"></a></dt>
<dd><p>Crop nii files</p>
<p>The programm loops over all subjects from the input (source) directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number_subjects</strong> – integer giving the number of subjects to analyze,
by default it is set to _ALL_SUBJECTS (-1).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.dataset_gen_pipe.DatasetCroppedSkeleton.crop_one_file">
<span class="sig-name descname"><span class="pre">crop_one_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subject_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.dataset_gen_pipe.DatasetCroppedSkeleton.crop_one_file" title="Permalink to this definition"></a></dt>
<dd><p>Crops one file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subject_id</strong> – string giving the subject ID</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.dataset_gen_pipe.DatasetCroppedSkeleton.dataset_gen_pipe">
<span class="sig-name descname"><span class="pre">dataset_gen_pipe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.dataset_gen_pipe.DatasetCroppedSkeleton.dataset_gen_pipe" title="Permalink to this definition"></a></dt>
<dd><p>Main API to create pickle files</p>
<dl class="simple">
<dt>The programm loops over all subjects from the input (source) directory.</dt><dd><p># Writes number of subjects and directory names to json file
dict_to_add = {‘nb_subjects’: len(list_subjects),joblib import Parallel, delayed</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number_subjects</strong> – integer giving the number of subjects to analyze,
by default it is set to _ALL_SUBJECTS (-1).</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.dataset_gen_pipe.dataset_gen_pipe">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.dataset_gen_pipe.</span></span><span class="sig-name descname"><span class="pre">dataset_gen_pipe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/hcp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgt_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/test'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/data/transform'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/data/bbox'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">morphologist_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ANALYSIS/3T_morphologist'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'L'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_sulci</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'S.T.s.ter.asc.ant.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nearest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_voxel_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.dataset_gen_pipe.dataset_gen_pipe" title="Permalink to this definition"></a></dt>
<dd><p>Main program generating cropped files and corresponding pickle file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.dataset_gen_pipe.define_njobs">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.dataset_gen_pipe.</span></span><span class="sig-name descname"><span class="pre">define_njobs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.dataset_gen_pipe.define_njobs" title="Permalink to this definition"></a></dt>
<dd><p>Returns number of cpus used by main loop</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.dataset_gen_pipe.main">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.dataset_gen_pipe.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.dataset_gen_pipe.main" title="Permalink to this definition"></a></dt>
<dd><p>Reads argument line and creates cropped files and pickle file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> – a list containing command line arguments</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.dataset_gen_pipe.parse_args">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.dataset_gen_pipe.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.dataset_gen_pipe.parse_args" title="Permalink to this definition"></a></dt>
<dd><p>Function parsing command-line arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> – a list containing command line arguments</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with keys: src_dir, tgt_dir, nb_subjects, list_sulci</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>params</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deep_folding.anatomist_tools.display">
<span id="deep-folding-anatomist-tools-display-module"></span><h2>deep_folding.anatomist_tools.display module<a class="headerlink" href="#module-deep_folding.anatomist_tools.display" title="Permalink to this headline"></a></h2>
<p>The aim of this script is to display saved model outputs thanks to Anatomist.
Model outputs are stored as numpy arrays.</p>
<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.display.array_to_ana">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.display.</span></span><span class="sig-name descname"><span class="pre">array_to_ana</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ana_a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.display.array_to_ana" title="Permalink to this definition"></a></dt>
<dd><p>Transforms output tensor into volume readable by Anatomist and defines
name of the volume displayed in Anatomist window.
Returns volume displayable by Anatomist</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.display.main">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.display.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.display.main" title="Permalink to this definition"></a></dt>
<dd><p>In the Anatomist window, for each model output, corresponding input will
also be displayed at its left side.
Number of columns and view (Sagittal, coronal, frontal) can be specified.
(It’s better to choose an even number for number of columns to display)</p>
</dd></dl>

</div>
<div class="section" id="module-deep_folding.anatomist_tools.load_data">
<span id="deep-folding-anatomist-tools-load-data-module"></span><h2>deep_folding.anatomist_tools.load_data module<a class="headerlink" href="#module-deep_folding.anatomist_tools.load_data" title="Permalink to this headline"></a></h2>
<p>Scripts that enables to create a dataframe of numpy arrays from .nii.gz or .nii
images.</p>
<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.load_data.fetch_data">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.load_data.</span></span><span class="sig-name descname"><span class="pre">fetch_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cropped_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgt_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.load_data.fetch_data" title="Permalink to this definition"></a></dt>
<dd><p>Creates a dataframe of data with a column for each subject and associated
np.array. Generation a dataframe of “normal” images and a dataframe of
“abnormal” images. Saved these this dataframe to pkl format on the target
directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cropped_dir</strong> – directory containing cropped images</p></li>
<li><p><strong>tgt_dir</strong> – directory where to save the pickle file</p></li>
<li><p><strong>side</strong> – hemisphere side, either ‘L’ for left or ‘R’ for right hemisphere</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.load_data.is_file_nii">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.load_data.</span></span><span class="sig-name descname"><span class="pre">is_file_nii</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.load_data.is_file_nii" title="Permalink to this definition"></a></dt>
<dd><p>Tests if file is nii file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – string giving file name with full path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean stating if file is nii file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>is_file_nii</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deep_folding.anatomist_tools.transform">
<span id="deep-folding-anatomist-tools-transform-module"></span><h2>deep_folding.anatomist_tools.transform module<a class="headerlink" href="#module-deep_folding.anatomist_tools.transform" title="Permalink to this headline"></a></h2>
<p>The aim of this script is to compute transformation files from native MRI space
to normalized SPM space</p>
<p>It scans all subjects from src_dir and looks for morphologist analysis folder,
then produces the transformation file from native space to normalized SPM space,
saves the results (one transformation file per subject) into directory tgt_dir</p>
<p class="rubric">Examples</p>
<p>Specifies the source directory where the MRI data lies, the target directory
where to put the transform, and the number of subjects to analyse
(all by default)</p>
<blockquote>
<div><p>$ python transform.py -s /neurospin/hcp -t /path/to/transfo_dir -n all
$ python transform.py –help</p>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.transform.TransformToSPM">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.transform.</span></span><span class="sig-name descname"><span class="pre">TransformToSPM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/hcp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgt_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/test/transform'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.transform.TransformToSPM" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Computes transformation from native to normalized SPM space</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.transform.TransformToSPM.src_dir">
<span class="sig-name descname"><span class="pre">src_dir</span></span><a class="headerlink" href="#deep_folding.anatomist_tools.transform.TransformToSPM.src_dir" title="Permalink to this definition"></a></dt>
<dd><p>A string giving the name of the source data directory.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.transform.TransformToSPM.tgt_dir">
<span class="sig-name descname"><span class="pre">tgt_dir</span></span><a class="headerlink" href="#deep_folding.anatomist_tools.transform.TransformToSPM.tgt_dir" title="Permalink to this definition"></a></dt>
<dd><p>A string giving the name of the target directory
in which the transformations are saved.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.transform.TransformToSPM.calculate_one_transform">
<span class="sig-name descname"><span class="pre">calculate_one_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subject_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.transform.TransformToSPM.calculate_one_transform" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the transformation file of a given subject.</p>
<p>This transformation enables to go from native space (= MRI space) to
normalized SPM space. The normalized SPM space  is
a translation + an axis inversion of the Talairach MNI space.
The transformation is directly written to the file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subject_id</strong> – id of subject whose transformation file is computed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.transform.TransformToSPM.calculate_transforms">
<span class="sig-name descname"><span class="pre">calculate_transforms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.transform.TransformToSPM.calculate_transforms" title="Permalink to this definition"></a></dt>
<dd><p>Calculates transformation file for all subjects.</p>
<p>This transformation enables to go from native space
(= MRI subject space) to normalized SPM space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number_subjects</strong> – integer giving the number of subjects to analyze,
by default it is set to _ALL_SUBJECTS (-1).</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.transform.main">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.transform.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.transform.main" title="Permalink to this definition"></a></dt>
<dd><p>Reads argument line and creates transformation files</p>
<p>These are transformations from native to normalize SPM space</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> – a list containing command line arguments</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.transform.parse_args">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.transform.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.transform.parse_args" title="Permalink to this definition"></a></dt>
<dd><p>Function parsing command-line arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>argv</strong> – a list containing command line arguments</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>source directory name, full path
tgt_dir: target directory where to save the transformations, full path
number_subjects: number of subjects to analyze</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>src_dir</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="deep_folding.anatomist_tools.transform.transform_to_spm">
<span class="sig-prename descclassname"><span class="pre">deep_folding.anatomist_tools.transform.</span></span><span class="sig-name descname"><span class="pre">transform_to_spm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/hcp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgt_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/neurospin/dico/data/deep_folding/test/transform'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deep_folding.anatomist_tools.transform.transform_to_spm" title="Permalink to this definition"></a></dt>
<dd><p>High-level API function performing the transform</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_dir</strong> – source directory name, full path</p></li>
<li><p><strong>tgt_dir</strong> – target directory where to save the transformations, full path</p></li>
<li><p><strong>number_subjects</strong> – number of subjects to analyze (all=-1 by default)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deep_folding.anatomist_tools">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-deep_folding.anatomist_tools" title="Permalink to this headline"></a></h2>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="deep_folding.html" class="btn btn-neutral float-left" title="deep_folding package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="deep_folding.anatomist_tools.utils.html" class="btn btn-neutral float-right" title="deep_folding.anatomist_tools.utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Louise Guillon et Joel Chavas.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>